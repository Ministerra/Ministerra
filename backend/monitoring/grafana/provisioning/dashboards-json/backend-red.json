{
	"id": null,
	"uid": "backend-red",
	"title": "01 - Backend RED",
	"schemaVersion": 36,
	"version": 2,
	"refresh": "15s",
	"time": { "from": "now-6h", "to": "now" },
	"panels": [
		{ "type": "timeseries", "title": "Requests (rps)", "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 }, "targets": [{ "expr": "sum(rate(http_requests_total[5m])) or vector(0)" }] },
		{
			"type": "timeseries",
			"title": "Error rate",
			"gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 },
			"targets": [{ "expr": "(sum(rate(http_requests_total{status_code=~\"5..\"}[5m])) / sum(rate(http_requests_total[5m]))) or vector(0)" }],
			"fieldConfig": { "defaults": { "unit": "percentunit" } }
		},
		{
			"type": "timeseries",
			"title": "p95 latency (s)",
			"gridPos": { "h": 8, "w": 12, "x": 0, "y": 8 },
			"targets": [{ "expr": "histogram_quantile(0.95, sum by (le) (rate(http_request_duration_seconds_bucket[5m]))) or vector(0)" }]
		},
		{
			"type": "table",
			"title": "Top routes by latency",
			"gridPos": { "h": 8, "w": 12, "x": 12, "y": 8 },
			"targets": [{ "expr": "topk(10, histogram_quantile(0.95, sum by (route,le) (rate(http_request_duration_seconds_bucket[5m]))))" }]
		}
	]
}
